---
layout:     post
title:      "Computer System and Structure"
subtitle:   " \"Hello World, Hello Blog\""
date:       2019-5-3 14：00
author:     "Leonard Yuan"
header-img: "img/home-bg-art.jpg"
catalog: true
tags:
    - Interview
    - Computer Structure

---

# 计算机组成原理复习

## 运算器

- CP1: 每个指令执行所需要的时钟周期数
- 计算机组成部分：
	- 数据通路
	- Control: cpu组成部分
	- Memory:
	- I/O
- 冯诺伊曼结构计算机：
	- 运算器
	- 存储器
	- 控制器
	- 输出设备
	- 输入设备

- 计算机系统的层次结构
	- 微程序级， 是一个实际机器层
	- 机器级，也是机器层
	- 操作系统级
	- 汇编语言级
	- 高级语言级
- 数据表示格式
	- 定点格式，数值范围有限，处理简单
	- 浮点格式，数值范围大，处理复杂
- 为了区别带有符号表示的数和机器中把符号 “数字化”的数，通常将前者称为真值，后者 称为机器数或机器码，使用补码可以将减法转换成加法
- 在计算机中，移码与加减法配合，能够实现乘除运算
- 浮点数通过特殊的形式来表示的，其中含有阶符，阶码，数符，尾数
- 表示十进制数时经常采用如下的编码形式，8421码，余3码，循环码
- ASCII字符使用7位2进制表示，可表示128个字符
- 校验码：在数据存储、传输过程中，附加在数据中的可 以用来检查和纠正因元件故障、噪声干扰等因 素导致数据错误的编码
	- 检错码
	- 纠错码，海明码
- 运算器有哪些
	- 算术逻辑运算单元ALU
	- 阵列乘除法器
	- 寄存器组
	- 多路开关
	- 三态缓冲器
	- 数据总线
- 内部总线：机器内部各部件数据传送频繁，可以把寄存器 间的数据传送通路加以归并，组成总线结构
	- 运算器分为单总线结构运算器，双总线结构运算器，三总线结构运算器

## 存储系统

![](/img/in_post/cs.images/1.png)

- 存储器是计算机中用来存放程序和数据的部件， 是Von Neumann结构计算机的重要组成
- 存储器是计算机中存储正处在运行中的程序和数据(或 一部分)的部件，通过`地址`、`数据`、`控制`三类总线与CPU或与其它部件连接
- 存储器分类： RAM(易失性存储器)和ROM
- 解决存储器问题的两种方式：
	- 层次存储器系统（时间局部性和空间局部性）
	- 采用并行技术

> 多级存储体系的组成

![](/img/in_post/cs.images/2.png)

-   内存是由多个存储单元组成，每个存储单元由其对应的编号
-   内存的主要技术指标：存取速度、体积和功耗、可靠性
-   处理器与主存储器通过三条总线进行连接
-   随机读写存储器（RAM）
	- 静态存储器SRAM：存储体、地址译码器、驱动器、I/O电路、控制电路、输出驱动电路，读操作不是破坏性的
	- 动态存储器DRAM：需要周期充电以维持存储内容不丢失(称为动态刷新)，需要进行集中式刷新或者分散式刷新。读操作是破坏性的，需要回写
- 一般由多个存储器芯片组成一个存储器，常见的构建方法有：
	- 位扩展法
	- 字扩展法
	- 字位同时扩展法

- 只读存储器ROM: 只能读出，不能写入，具有不易失性，写入的过程叫做对其编程（掩模式只读存储器，一次编程只读存储器，多次编程只读存储器）
- 闪速存储器：它既有EEPROM的特点，又有RAM的特点，因而是一种全新的存储结构
- 提高存储系统访问速度的途径
	- 芯片技术—提高单个芯片的访问速度
	- 结构技术—改进存储器与CPU之间的连接方式
		- 单体多字存储器
		- 多体交叉存储器
	- 系统结构技术—从整个存储系统的角度采用分层存储结构
		- cache
		- 虚拟存储器
- 引入Cache的目的：由于大容量的主存储器通常由DRAM芯片构成， 其访问速度较慢，而静态存储器SRAM速度快，但容量小，因此在cpu和内存之间加一个高速缓冲存储器Cache.
![](/img/in_post/cs.images/3.png)
- `Cache`基本原理：一般用高速的SRAM构成，CPU和主存之间的速度差别很大，因此采用两级或多级Cache系统
> Cache的基本工作原理

![](/img/in_post/cs.images/4.png)

- 在高速缓冲存储器中，用相联存储器存放cache的行地址
- 为了便于管理，将主存和将主存和cache分别分为大小相等的若干块(也称行)，只需对块地址进行映射
- 为了将主存的块放在Cache中，需要将主存地址转换成Cache地址，叫做地址映射
- Cache涉及到的核心策略
	- Cache块替换策略
	- Cache块写操作策略
		- 写回
		- 写穿透
- 虚拟存储器的引入：程序所需的存储器容量与计算机系统实际配备的主存储器的容量之间往往存在着矛盾，因此给程序员一个比实际内存大得多的编址空间
- 虚拟存储器借助于磁盘等辅助存储器来扩大主存容量
- 在引入虚存以后，用户编写程序的时候使用的是虚地址（逻辑地址），实际的是物理地址（实地址），程序进行虚地址到实地址转换的过程称为程序的再定位，通过操作系统管理的页表可将虚地址转换为物理地址
- 主存-外存层次结构：
	- 段式存储管理
	- 页式存储管理
		- 页不是程序本身的结构特性
		- 在查询的过程中可以使用快慢表这种方式
	- 段页式虚拟存储管理
		- 程序先按逻辑单位分段，再把每段分成固定大小的页
		- 操作系统对主存的调入调出是按页面进行的，但它又可以按段实现共享和保护
> 虚存与Cache的比较

![](/img/in_post/cs.images/5.png)
- 存储保护：防止程序破坏其他程序或者不合法访问

## 指令系统

- CISC(复杂指令系统计算机)和RISC(精简指令系统计算机)
- 指令的构成
	- 操作码字段
	- 操作数字段
- 存储器既可用来存放数据，又可用来存放指令
- 操作数或指令在存储器中的地址:某个操作数或某条指令存放在某个存储单元时，其存储单元的编号
- 指令寻址方式:
	- 顺序寻址方式
	- 跳跃寻址方式
- 操作数寻址方式
	- 隐含寻址，可以想象成默认
	- 立即寻址，指令的地址字段就存的是数据本身
	- 直接寻址，地址字段存地址
	- 间接寻址，存储操作数地址的地址
	- 寄存器寻址
	- 寄存器间接寻址
	- 偏移寻址
	- 相对寻址
- 堆栈类型：寄存器堆栈和存储器堆栈

## 中央处理器
- 处理器的功能：
	- 指令控制
	- 操作控制
	- 时间控制
	- 数据加工
	- 中断处理（对计算机中出现的异常情况和特殊请求进行处理）
![](/img/in_post/cs.images/6.png)
- cpu的基本组成：
	- 控制器（完成指挥和协调整个计算机系统的操作）
	- 运算器（由算术逻辑单元(ALU)、累加寄存器等组成）执行算术运算和逻辑运算
![](/img/in_post/cs.images/7.png)
- 指令周期： 指令周期是取指令、分析指令并执行指令所需的总时间
- CPU周期：是指内存中读取一个指令字的最短时间
- 区别：指令周期、cpu周期和时钟周期
- 每条指令的执行过程：
	- 读取指令
	- 分析指令
	- 按指令规定内容执行指令
	- 检查有无中断请求
- 时序：在一个CPU周期中，时间可分为若干个小段，每一个小段CPU完成一个特定的操作。计算机以时序信号为基准完成协调动作。时序通过逻辑电路或者时序信号产生器产生
- 一条微指令对应一条机器指令的一个执行步骤。一条机器指令对应一个微程序，这个微程序是由若干
条微指令序列组成的
- 在一个指令周期中，要顺序执行一系列微操作，这就需要设置若干个节拍电位，来保证这些微操作的执行的先后顺序。

- 流水cpu: 并行处理技术
	- 时间并行
	- 空间并行
	- 时间和空间并行
- 4级指令流水线
	- 取指
	- 指令译码
	- 执行
	- 写回

## 总线系统
- 总线：指在功能部件和功能部 件之间或设备与设备之间的一组进行互连和传输信息的信号线，这里信息包括指令、数据和地址
- 总线的分类
	- 内部总线(片内总线):CPU内部连接各寄存器及运算器部件之间的总线
	- 系统总线：CPU和计算机系统中其他高速功能 部件(如:存储器)相互连接的总线
	- I/O总线：中、低速I/O设备相互连接的总线, 也称设备总线或通信总线
- 总线性能指标
	- 总线宽度
	- 总线定时协定
	- 总线传输率
	- 总线带宽
- 单机系统中的总线结构
	- 单总线
	- 双总线
	- 三总线
- 接口是CPU和主存、外设之间通过总线进行连接的逻辑部件
- 系统总线上传送的信息必须采用并行传送方式
- 接口：CPU和主存、外设之间通过总线进行连接的逻辑部件
- 总线仲裁是为了解决多个主设备争用总线的问题，必须设置总线仲裁部件
- 总线定时分为同步定时和异步定时

## 外围设备

- 略

## 输入输出设备
- cpu与外设之间的数据传送方式
	- 程序查询方式
	- 程序中断方式（最重要理解的地方）
	- 直接存储器存储方式（DMA）
	- 通道方式
- 中断(Interrupt)是指CPU暂时中止现行 程序，转去处理随机发生的紧急事件，处理完后自动返回原程序的功能和技术。中断系统是计算机实现中断功能的软硬件总称
- 中断处理过程
	- 中断请求
	- 中断排队与判优
	- 中断响应
	- 中断处理
	- 恢复现场与中断返回
- 中断类型
	- 单级中断
	- 多级中断（中断嵌套方式）
- DMA：一种完全由硬件实现I/O交换的工作方式, DMA控制器从CPU接管对总 线的控制，数据交换不经过CPU，而直接在内存和I/O设备之间进行. DMA传送过程中，CPU基本处于不工作状态或者说保持状态
- 通道：通道是计算机系统中代替CPU管理控制外设的独立部件，在CPU启动通道后，通道会自动地去内存
取出通道指令并执行，直到数据交换过程 结束，然后向CPU发出中断请求，进行通道结束处理工作

## 操作系统
- 主要管理三种资源：
	- 处理器管理
	- 存储器管理
	- 设备管理
- 进程是程序在一个数据集合上运行的过程，它 是传统操作系统进行资源分配和调度的一个独立单位。进程是分配给处理器并由处理器执行的一个实体，进程是程序执行的一个过程。进程 = 进程控制块PCB + 程序 + 数据集合
- 进程的状态：
	- 创建
	- 就绪
	- 运行
	- 阻塞：进程由于等待I/O操作完成或某些事件出现而被系统挂起
	- 终止
![](/img/in_post/cs.images/8.png)
- 进程调度的任务是控制协调进程对CPU的竞争，分为：抢占模式，非抢占模式
- 存储管理，主要是分区式存储管理
	- 意思是内存被分为若干个区域，操作系统占据其中的一个区域，其他的区域被各种应用程序分
-  交换技术
	- 交换技术的优点是增加了并发运行的进程数目， 缺点是增加了开销
